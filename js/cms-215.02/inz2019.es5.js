var inz=window.inz||{};inz.inz2019Ready=function(){inz.commonLayout.init();inz.header.init();inz.footer.init();if(typeof inz.nav!=="undefined"){inz.nav.init()}if(typeof inz.nav2023!=="undefined"){inz.nav2023.init()}inz.genericContent.init();inz.advancedImages.init();inz.viewport.init()};inz.viewport=inz.viewport||{};inz.viewport.isTabletOrSmaller=function(){return window.matchMedia("(max-width: 944px)").matches};inz.viewport.EVENT_INZ_ADJUST_LAYOUT="inz_adjust_layout";inz.viewport.init=function(){function fireINZAdjustLayout(){document.dispatchEvent(new CustomEvent("inz_adjust_layout"))}window.addEventListener("resize",function(){fireINZAdjustLayout()});fireINZAdjustLayout()};


inz.commonLayout={};inz.commonLayout.elements={};inz.commonLayout.init=function(){inz.commonLayout.elements.bottomRightOverlays=$("#bottom_right_overlays");inz.commonLayout.elements.inzPageHeader=$("header.inz_page_header");inz.commonLayout.elements.backToTopButton=null;inz.commonLayout.initBackToTop()};inz.commonLayout.initBackToTop=function(){if(!inz.commonLayout.isBackToTopRequested()){return}inz.commonLayout.elements.backToTopButton=$("<button>",{id:"back_to_top",title:"Back to Top",click:function click(){window.scrollTo(0,0);inz.commonLayout.updateBackToTopButtonPosition()}});inz.commonLayout.elements.bottomRightOverlays.prepend(inz.commonLayout.elements.backToTopButton);window.addEventListener("scroll",function(){inz.commonLayout.updateBackToTopButtonPosition()});inz.commonLayout.elements.backToTopButton.on("transitionend",function(){inz.commonLayout.updateBackToTopButtonDisplay()});inz.commonLayout.updateBackToTopButtonPosition();inz.commonLayout.updateBackToTopButtonDisplay();setTimeout(function(){inz.commonLayout.elements.backToTopButton.addClass("with_transition")},250)};inz.commonLayout.isBackToTopRequested=function(){return $(document.body).is("[data-back-to-top]")};inz.commonLayout.isHeaderOutOfView=function(){var result;if(inz.commonLayout.elements.inzPageHeader.length){result=inz.commonLayout.elements.inzPageHeader.offset().top+inz.commonLayout.elements.inzPageHeader.outerHeight()<window.visualViewport.pageTop}else{result=window.visualViewport.pageTop/window.visualViewport.height>.33}return result};inz.commonLayout.shouldShowBackToTop=function(){return inz.commonLayout.isHeaderOutOfView()};inz.commonLayout.updateBackToTopButtonPosition=function(){if(inz.commonLayout.elements.backToTopButton.hasClass("hidden")&&inz.commonLayout.shouldShowBackToTop()){inz.commonLayout.updateBackToTopButtonDisplay()}inz.commonLayout.elements.backToTopButton.toggleClass("hidden",!inz.commonLayout.shouldShowBackToTop())};inz.commonLayout.updateBackToTopButtonDisplay=function(){inz.commonLayout.elements.backToTopButton.css("display",inz.commonLayout.shouldShowBackToTop()?"inline-block":"none")};


function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F2(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf2(o2,p2){o2.__proto__=p2;return o2};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf2(o2){return o2.__proto__||Object.getPrototypeOf(o2)};return _getPrototypeOf(o)}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj2){return typeof obj2}:function(obj2){return obj2&&"function"==typeof Symbol&&obj2.constructor===Symbol&&obj2!==Symbol.prototype?"symbol":typeof obj2},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj)}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value)}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance")}return fn}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor)}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver)}return descriptor.value}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance")}return privateMap.get(receiver)}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value)}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field")}descriptor.value=value}}inz.nav2023={menu:null};inz.nav2023.init=function(){document.addEventListener("inz.navdata.loaded",function(e){inz.nav2023.menu=new HamburgerMenu(inz.navData.data,inz.navData.siteNavRoot)});document.body.style.setProperty("--inz-scrollbar-width","".concat(window.innerWidth-document.body.clientWidth,"px"))};var _navData=new WeakMap;var _siteNavRootUrl=new WeakMap;var _navItems=new WeakMap;var _topLevelItems=new WeakMap;var _menuButton=new WeakMap;var _dialog=new WeakMap;var _navParentDiv=new WeakMap;var _crumbsUl=new WeakMap;var _rootMenuCrumb=new WeakMap;var _rootMenuButton=new WeakMap;var _childrenDiv=new WeakMap;var _sectionLinksDiv=new WeakMap;var _sectionLinksP=new WeakMap;var _sectionLinksUl=new WeakMap;var _returnDiv=new WeakMap;var _returnP=new WeakMap;var _returnButton=new WeakMap;var _currentItem=new WeakMap;var _initialItem=new WeakMap;var _initDialog=new WeakSet;var _show=new WeakSet;var _hide=new WeakSet;var _updateDialog=new WeakSet;var _reset=new WeakSet;var _isShowingRoot=new WeakSet;var _showParent=new WeakSet;var _showItem=new WeakSet;var _loadNavData=new WeakSet;var _getSiteNavRootItem=new WeakSet;var HamburgerMenu=_createClass(function HamburgerMenu2(data,siteNavRootUrl){"use strict";var _this=this;_classCallCheck(this,HamburgerMenu2);_classPrivateMethodInitSpec(this,_getSiteNavRootItem);_classPrivateMethodInitSpec(this,_loadNavData);_classPrivateMethodInitSpec(this,_showItem);_classPrivateMethodInitSpec(this,_showParent);_classPrivateMethodInitSpec(this,_isShowingRoot);_classPrivateMethodInitSpec(this,_reset);_classPrivateMethodInitSpec(this,_updateDialog);_classPrivateMethodInitSpec(this,_hide);_classPrivateMethodInitSpec(this,_show);_classPrivateMethodInitSpec(this,_initDialog);_classPrivateFieldInitSpec(this,_navData,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_siteNavRootUrl,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_navItems,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_topLevelItems,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_menuButton,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_dialog,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_navParentDiv,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_crumbsUl,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_rootMenuCrumb,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_rootMenuButton,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_childrenDiv,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_sectionLinksDiv,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_sectionLinksP,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_sectionLinksUl,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_returnDiv,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_returnP,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_returnButton,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_currentItem,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_initialItem,{writable:true,value:void 0});_classPrivateFieldSet(this,_navData,data);_classPrivateFieldSet(this,_siteNavRootUrl,siteNavRootUrl);_classPrivateFieldSet(this,_navItems,{});_classPrivateFieldSet(this,_topLevelItems,[]);_classPrivateFieldSet(this,_menuButton,document.getElementById("header_menu_2023"));if(_classPrivateFieldGet(this,_menuButton)){_classPrivateFieldGet(this,_menuButton).addEventListener("click",function(e){_classPrivateMethodGet(_this,_show,_show2).call(_this)})}_classPrivateMethodGet(this,_initDialog,_initDialog2).call(this);document.body.addEventListener("keydown",function(event){if(_classPrivateFieldGet(_this,_dialog)&&event.key==="F2"&&!event.ctrlKey&&!event.altKey&&!event.shiftKey&&!event.metaKey){if(_classPrivateFieldGet(_this,_dialog).open){_classPrivateMethodGet(_this,_hide,_hide2).call(_this)}else{_classPrivateMethodGet(_this,_show,_show2).call(_this)}event.stopPropagation();event.preventDefault()}});_classPrivateMethodGet(this,_loadNavData,_loadNavData2).call(this)});function _initDialog2(){var _this3=this;if(!_classPrivateFieldGet(this,_dialog)){_classPrivateFieldSet(this,_dialog,document.createElement("dialog"));_classPrivateFieldGet(this,_dialog).setAttribute("id","hamburger_menu_2023");_classPrivateFieldGet(this,_dialog).innerHTML='<nav class="menu_body">\n    <div class="close_bar">\n        <button><span class="icon"></span><span>Close</span></button>\n    </div>\n    <div class="upper_nav">\n        <div class="nav_parent">\n            <button class="nav_button nav_parent" title="Up One Level"></button>\n        </div>\n        <ul class="crumbs">\n            <li class="root_menu"><button class="nav_item">Main menu</button></li>\n        </ul>\n    </div>\n    <div class="children"></div>\n    <div class="section_links">\n        <p></p>\n        <ul></ul>\n    </div>\n    <div class="return">\n        <p></p>\n        <button><span class="icon"></span> Return to main menu</button>\n    </div>\n</nav>';_classPrivateFieldSet(this,_navParentDiv,_classPrivateFieldGet(this,_dialog).querySelector("div.nav_parent"));_classPrivateFieldSet(this,_crumbsUl,_classPrivateFieldGet(this,_dialog).querySelector("ul.crumbs"));_classPrivateFieldSet(this,_rootMenuCrumb,_classPrivateFieldGet(this,_crumbsUl).querySelector("li.root_menu"));_classPrivateFieldSet(this,_rootMenuButton,_classPrivateFieldGet(this,_rootMenuCrumb).querySelector("button"));_classPrivateFieldGet(this,_rootMenuButton).addEventListener("click",function(){_classPrivateMethodGet(_this3,_showItem,_showItem2).call(_this3,null)});_classPrivateFieldSet(this,_childrenDiv,_classPrivateFieldGet(this,_dialog).querySelector("div.children"));_classPrivateFieldSet(this,_sectionLinksDiv,_classPrivateFieldGet(this,_dialog).querySelector("div.section_links"));_classPrivateFieldSet(this,_sectionLinksP,_classPrivateFieldGet(this,_sectionLinksDiv).querySelector("p"));_classPrivateFieldSet(this,_sectionLinksUl,_classPrivateFieldGet(this,_sectionLinksDiv).querySelector("ul"));_classPrivateFieldSet(this,_returnDiv,_classPrivateFieldGet(this,_dialog).querySelector("div.return"));_classPrivateFieldSet(this,_returnP,_classPrivateFieldGet(this,_returnDiv).querySelector("p"));_classPrivateFieldSet(this,_returnButton,_classPrivateFieldGet(this,_returnDiv).querySelector("button"));_classPrivateFieldGet(this,_returnButton).addEventListener("click",function(){_classPrivateMethodGet(_this3,_showItem,_showItem2).call(_this3,null)});_classPrivateFieldGet(this,_dialog).querySelector(".close_bar button").addEventListener("click",function(){_classPrivateMethodGet(_this3,_hide,_hide2).call(_this3)});_classPrivateFieldGet(this,_navParentDiv).querySelector("button").addEventListener("click",function(){_classPrivateMethodGet(_this3,_showParent,_showParent2).call(_this3)});document.body.append(_classPrivateFieldGet(this,_dialog))}}function _show2(){if(_classPrivateFieldGet(this,_dialog)&&!_classPrivateFieldGet(this,_dialog).open){_classPrivateMethodGet(this,_reset,_reset2).call(this);document.body.classList.add("lightbox_showing");_classPrivateFieldGet(this,_dialog).showModal()}}function _hide2(){if(_classPrivateFieldGet(this,_dialog)&&_classPrivateFieldGet(this,_dialog).open){_classPrivateFieldGet(this,_dialog).close();document.body.classList.remove("lightbox_showing")}}function _updateDialog2(){var self=this;function makeItemButton(item2){var button=document.createElement("button");button.setAttribute("class","nav_item");if(item2===_classPrivateFieldGet(self,_currentItem)){button.setAttribute("disabled","")}button.textContent=item2.title;button.addEventListener("click",function(){_classPrivateMethodGet(self,_showItem,_showItem2).call(self,item2)});return button}_classPrivateFieldGet(this,_dialog).querySelector("div.nav_parent").style.display=_classPrivateMethodGet(this,_isShowingRoot,_isShowingRoot2).call(this)?"none":"block";_classPrivateFieldGet(this,_crumbsUl).innerHTML="";_classPrivateFieldGet(this,_crumbsUl).append(_classPrivateFieldGet(this,_rootMenuCrumb));if(_classPrivateMethodGet(this,_isShowingRoot,_isShowingRoot2).call(this)){_classPrivateFieldGet(this,_rootMenuButton).setAttribute("disabled","")}else{_classPrivateFieldGet(this,_rootMenuButton).removeAttribute("disabled")}if(!_classPrivateMethodGet(this,_isShowingRoot,_isShowingRoot2).call(this)){var _iterator=_createForOfIteratorHelper(_classPrivateFieldGet(this,_currentItem).getAncestors()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;var _li=document.createElement("li");_li.append(makeItemButton(item));_classPrivateFieldGet(this,_crumbsUl).append(_li)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var li=document.createElement("li");li.append(makeItemButton(_classPrivateFieldGet(this,_currentItem)));_classPrivateFieldGet(this,_crumbsUl).append(li)}function makeItemLink(item2){var a2=document.createElement("a");a2.setAttribute("href",item2.url);if(item2.isCurrentPage()){a2.classList.add("current_page")}a2.textContent=item2.title;return a2}function makeChildrenButton(item2){var button=document.createElement("button");button.setAttribute("class","nav_button nav_children");button.setAttribute("title","".concat(item2.title,": Show More"));button.addEventListener("click",function(){_classPrivateMethodGet(self,_showItem,_showItem2).call(self,item2)});return button}_classPrivateFieldGet(this,_childrenDiv).innerHTML="";var children;if(_classPrivateMethodGet(this,_isShowingRoot,_isShowingRoot2).call(this)){children=[_classPrivateMethodGet(this,_getSiteNavRootItem,_getSiteNavRootItem2).call(this)].concat(_classPrivateFieldGet(this,_topLevelItems))}else{children=_classPrivateFieldGet(this,_currentItem).children}if(children){var ul=document.createElement("ul");var _iterator2=_createForOfIteratorHelper(children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var child=_step2.value;var _li2=document.createElement("li");_li2.append(makeItemLink(child));if(child.hasChildren()){var div=document.createElement("div");div.append(makeChildrenButton(child));_li2.append(div)}ul.append(_li2)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}_classPrivateFieldGet(this,_childrenDiv).append(ul)}var topLevelNavItem=_classPrivateMethodGet(this,_isShowingRoot,_isShowingRoot2).call(this)?null:_classPrivateFieldGet(this,_currentItem).getTopLevelNavItem();var hasUtilityLinks=topLevelNavItem instanceof TopLevelNavItem&&topLevelNavItem.utilityLinks instanceof Array&&topLevelNavItem.utilityLinks.length>0;_classPrivateFieldGet(this,_sectionLinksDiv).style.display=hasUtilityLinks?"block":"none";if(hasUtilityLinks){_classPrivateFieldGet(this,_sectionLinksP).textContent="Featured pages in ".concat(topLevelNavItem.title,":");_classPrivateFieldGet(this,_sectionLinksUl).innerHTML="";var _iterator3=_createForOfIteratorHelper(topLevelNavItem.utilityLinks),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var link=_step3.value;var _li3=document.createElement("li");var a=document.createElement("a");a.setAttribute("href",link.url);a.textContent=link.title;_li3.append(a);_classPrivateFieldGet(this,_sectionLinksUl).append(_li3)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}if(topLevelNavItem instanceof TopLevelNavItem){_classPrivateFieldGet(this,_returnP).textContent="Not looking for information on ".concat(topLevelNavItem.title,"?");_classPrivateFieldGet(this,_returnDiv).style.display="block"}else{_classPrivateFieldGet(this,_returnDiv).style.display="none"}}function _reset2(){_classPrivateFieldSet(this,_currentItem,_classPrivateFieldGet(this,_initialItem));_classPrivateMethodGet(this,_updateDialog,_updateDialog2).call(this)}function _isShowingRoot2(){return _classPrivateFieldGet(this,_currentItem)===null}function _showParent2(){if(!_classPrivateMethodGet(this,_isShowingRoot,_isShowingRoot2).call(this)){_classPrivateFieldSet(this,_currentItem,_classPrivateFieldGet(this,_currentItem).hasParent()?_classPrivateFieldGet(this,_currentItem).parent:null);_classPrivateMethodGet(this,_updateDialog,_updateDialog2).call(this)}}function _showItem2(item){_classPrivateFieldSet(this,_currentItem,item);_classPrivateMethodGet(this,_updateDialog,_updateDialog2).call(this)}function _loadNavData2(){var self=this;function parseChild(o2,parent){var item2=new NavItem(o2.i,o2.u,o2.t,[],parent);_classPrivateFieldGet(self,_navItems)[item2.uid]=item2;if(_classPrivateFieldGet(self,_initialItem)===void 0&&item2.isCurrentPage()){_classPrivateFieldSet(self,_initialItem,item2)}if(o2.c){var _iterator4=_createForOfIteratorHelper(o2.c),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var c2=_step4.value;item2.children.push(parseChild(c2,item2))}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}return item2}_classPrivateFieldGet(this,_topLevelItems).length=0;var _iterator5=_createForOfIteratorHelper(_classPrivateFieldGet(this,_navData)),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var o=_step5.value;var item=new TopLevelNavItem(o.i,o.u,o.t,[],[],o.m,o.s);_classPrivateFieldGet(this,_navItems)[item.uid]=item;_classPrivateFieldGet(this,_topLevelItems).push(item);if(_classPrivateFieldGet(this,_initialItem)===void 0&&item.isCurrentPage()){_classPrivateFieldSet(this,_initialItem,item)}if(o.l){var _iterator6=_createForOfIteratorHelper(o.l),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var l=_step6.value;item.utilityLinks.push(new NavLinkItem(l.i,l.u,l.t,l.a))}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}if(o.c){var _iterator7=_createForOfIteratorHelper(o.c),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var c=_step7.value;item.children.push(parseChild(c,item))}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}if(_classPrivateFieldGet(this,_initialItem)===void 0){_classPrivateFieldSet(this,_initialItem,null)}else{_classPrivateFieldSet(this,_initialItem,_classPrivateFieldGet(this,_initialItem).hasParent()?_classPrivateFieldGet(this,_initialItem).parent:null)}}function _getSiteNavRootItem2(){return new NavItem(null,_classPrivateFieldGet(this,_siteNavRootUrl),"Home",void 0,void 0)}var NavItem=function(){"use strict";function NavItem2(uid,url,title,children,parent){_classCallCheck(this,NavItem2);this.uid=uid;this.url=url;this.title=title;this.children=children;this.parent=parent}_createClass(NavItem2,[{key:"hasChildren",value:function hasChildren(){return _typeof(this.children)==="object"&&this.children.length>0}},{key:"hasParent",value:function hasParent(){return _typeof(this.parent)==="object"}},{key:"getAncestors",value:function getAncestors(){var ancestors=[];for(var i=this;i.hasParent();i=i.parent){ancestors.push(i.parent)}ancestors.reverse();return ancestors}},{key:"getTopLevelNavItem",value:function getTopLevelNavItem(){for(var i=this;;i=i.parent){if(i instanceof TopLevelNavItem){return i}if(!i.hasParent()){break}}return null}},{key:"isCurrentPage",value:function isCurrentPage(){return new RegExp("^"+this.url+"[/]?$").exec(window.location.pathname)!==null}}]);return NavItem2}();var NavLinkItem=_createClass(function NavLinkItem2(uid,url,title,adminUrl){"use strict";_classCallCheck(this,NavLinkItem2);this.uid=uid;this.url=url;this.title=title;this.adminUrl=adminUrl});var TopLevelNavItem=function(_NavItem){"use strict";_inherits(TopLevelNavItem2,_NavItem);var _super=_createSuper(TopLevelNavItem2);function TopLevelNavItem2(uid,url,title,utilityLinks,children,menuTheme,isSection){var _this2;_classCallCheck(this,TopLevelNavItem2);_this2=_super.call(this,uid,url,title,children);_this2.utilityLinks=utilityLinks;_this2.menuTheme=menuTheme;_this2.isSection=isSection;return _this2}return _createClass(TopLevelNavItem2)}(NavItem);console.debug("inz.nav2023 loaded");


inz.Lightbox=function(lightboxSelector,triggerSelector,initialFocusSelector,shouldShowLightboxCheck){this.lightbox=$(lightboxSelector);this.displayValue=this.lightbox.data("display");this.initialFocusSelector=initialFocusSelector;this.previousFocusElement=null;this.shouldShowLightboxCheck=typeof shouldShowLightboxCheck==="function"?shouldShowLightboxCheck:function(lightbox){return true};var self=this;$(triggerSelector).click(function(){self.show()});this.lightbox.find(".close_lightbox").click(function(){self.hide()});this.lightbox.data("lightbox",this)};inz.Lightbox.prototype.show=function(){if(!this.shouldShowLightboxCheck(this)){console.log("lightbox show() vetoed!");return}this.previousFocusElement=$(document.activeElement);this.lightbox.trigger("inz_lightbox:showing");if(this.displayValue){this.lightbox.css("display",this.displayValue)}else{this.lightbox.show()}$(document.body).addClass("lightbox_showing");var initialFocusElement=this.initialFocusSelector?this.lightbox.find(this.initialFocusSelector).first():null;if(!initialFocusElement){initialFocusElement=inz.getFocusable(this.lightbox.find(".lightbox_body")).first()}if(initialFocusElement.length>0){initialFocusElement[0].focus()}else{this.lightbox.focus()}this.lightbox.trigger("inz_lightbox:shown")};inz.Lightbox.prototype.hide=function(){this.lightbox_hide_vetoed=false;this.lightbox.trigger("inz_lightbox:hiding",[this]);if(this.lightbox_hide_vetoed){return}this.lightbox.hide();this.afterHide()};inz.Lightbox.prototype.afterHide=function(){$(document.body).toggleClass("lightbox_showing",$(".inz_lightbox").is(":visible"));if(this.previousFocusElement){this.previousFocusElement.focus()}this.lightbox.trigger("inz_lightbox:hidden")};inz.header={};inz.header.init=function(){$(".inz_lightbox").keydown(function(e){if(e.keyCode===9){e.preventDefault();var focusableElements=inz.getFocusable(this);if(focusableElements.length===0){return}var newIndex=focusableElements.index(e.target)+(e.shiftKey?-1:1);if(newIndex<0){newIndex=focusableElements.length-1}else if(newIndex>=focusableElements.length){newIndex=0}focusableElements[newIndex].focus()}});var searchLightbox=new inz.Lightbox("#header_search_lightbox",".header2019 #header_search");searchLightbox.lightbox.on("inz_lightbox:showing",function(e){searchLightbox.lightbox.find(".lightbox_body > input").val(null)});var loginLightbox=new inz.Lightbox("#header_login_lightbox",".header2019 #header_login");function resetLoginLightbox(){$("#header_login_lightbox .login_details").hide();$("#header_login_lightbox .service_selector.selected").each(function(){inz.forms.panel.getLoginForm($(this).attr("data-target-id").substring(1)).reset();$(this).removeClass("selected")});$("#header_login_lightbox article.service_detail").hide()}loginLightbox.lightbox.on("inz_lightbox:showing",resetLoginLightbox);document.addEventListener(inz.forms.panel.events.PANEL_SHOWN,function(e){if(e.detail.container.offsetParent!==null){var loginDetails=$("#header_login_lightbox .login_details");$("html, body").animate({scrollTop:loginDetails.offset().top})}});var lightboxSearchInput=$("#header_search_lightbox > .lightbox_body input");var lightboxSearchButton=$("#header_search_lightbox > .lightbox_body button");function performLightboxSearch(){var a=lightboxSearchInput.val();if(a)inz.siteSearchWidget.submitQuery(a);if(/^\/(inz\/)?search$/.test(window.location.pathname)){searchLightbox.hide()}}lightboxSearchButton.click(performLightboxSearch);lightboxSearchInput.keydown(function(e){var swallowEvent=false;switch(e.which){case 13:performLightboxSearch();swallowEvent=true;break;case 27:if($(this).val()){$(this).val(null)}else{searchLightbox.hide()}swallowEvent=true;break}if(swallowEvent){e.preventDefault();e.stopPropagation()}});function updateLightboxSearchButton(){lightboxSearchButton.prop("disabled",!lightboxSearchInput.val())}lightboxSearchInput.keyup(updateLightboxSearchButton);updateLightboxSearchButton();$("#header_login_lightbox .service_selector").click(function(){var targetWasSelected=$(this).hasClass("selected");resetLoginLightbox();if(!targetWasSelected){$($(this).attr("data-target-id")).show();var loginDetails=$("#header_login_lightbox .login_details");loginDetails.show();$("html, body").animate({scrollTop:loginDetails.offset().top});$(this).addClass("selected")}});var menuLightbox=new inz.Lightbox("#header_menu_lightbox",".header2019 #header_menu","button.close_lightbox")};


inz.footer={};inz.footer.init=function(){var widget=$("#footer_visa_search_widget");if(!widget.length){return}widget.on("select2:select",function(e){window.location=$(e.target).select2("data")[0]["id"]})};


function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F2(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}inz.genericContent={};inz.genericContent.init=function(){document.addEventListener(inz.viewport.EVENT_INZ_ADJUST_LAYOUT,function(){inz.genericContent.updateFullWidthImages()})};inz.genericContent.updateFullWidthImages=function(){var extendToLeftEdge=!inz.viewport.isTabletOrSmaller();var nl=document.querySelectorAll(".inz_main_column .inz_image.inz_image_full_width");var _iterator=_createForOfIteratorHelper(nl),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var n=_step.value;if(extendToLeftEdge){n.style.marginLeft=0-n.parentElement.offsetLeft-n.offsetParent.offsetLeft+"px"}else{n.style.marginLeft=null}}}catch(err){_iterator.e(err)}finally{_iterator.f()}};


function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj2){return typeof obj2}:function(obj2){return obj2&&"function"==typeof Symbol&&obj2.constructor===Symbol&&obj2!==Symbol.prototype?"symbol":typeof obj2},_typeof(obj)}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind()}else{_get=function _get2(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver)}return desc.value}}return _get.apply(this,arguments)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf2(o2,p2){o2.__proto__=p2;return o2};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf2(o2){return o2.__proto__||Object.getPrototypeOf(o2)};return _getPrototypeOf(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==void 0){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F2(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}inz=inz||{};inz.details=inz.details||{};inz.details.bpStateMobile=false;inz.details.bpStateTablet=false;inz.details.init=function(){var mat=window.matchMedia("(max-width: 944px)");mat.addEventListener("change",inz.details.bpTablet);var mbl=window.matchMedia("(max-width: 749px)");mbl.addEventListener("change",inz.details.bpMobile);inz.details.bpTablet(mat);inz.details.bpMobile(mbl);$(".vd_nb_apply_btn input").on("click",function(e){e.preventDefault();e.stopPropagation()});inz.details.loginLightbox=new inz.Lightbox("#details_login_lightbox",".vd_nb_apply_btn input");inz.details.hashChangeHandler();window.addEventListener("hashchange",inz.details.hashChangeHandler,false)};inz.details.hashChangeHandler=function(e){if(window.location.hash.length>1){var sec=window.location.hash.substring(1);var sid;switch(sec){case"overview":sid="#overview";break;case"apply":sid="#sc_".concat(inz.details.findSectionByType("who_can_apply"));break;case"process":sid="#sc_".concat(inz.details.findSectionByType("process_and_costs"));break;case"submit":sid="#sc_".concat(inz.details.findSectionByType("how_to_submit"));break;case"points":sid="#sc_".concat(inz.details.findSectionByType("points"));break;case"conditions":sid="#sc_".concat(inz.details.findSectionByType("conditions"));break;default:if(sec.startsWith("sc_"))sid="#"+sec;break}if(sid!==null){var target=$(sid);if(target.length!==0){window.scrollTo({left:0,top:target.offset().top-$(".vd_navbar").outerHeight()+10,behavior:"smooth"});setTimeout(function(){window.scrollTo({left:0,top:target.offset().top-$(".vd_navbar").outerHeight()+10,behavior:"smooth"})},500)}}}};inz.details.findSectionByType=function(section_type){var sections=document.querySelectorAll(".vd_section_container");var _iterator=_createForOfIteratorHelper(sections),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var section=_step.value;var vds=section.getAttribute("data-vds-type");if(vds===section_type){return section.getAttribute("data-sid")}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null};inz.details.bpTablet=function(e){if(e.matches){inz.details.bpStateTablet=true}else{inz.details.bpStateTablet=false}inz.details.breakpointChange(true,false)};inz.details.bpMobile=function(e){if(e.matches){inz.details.bpStateMobile=true}else{inz.details.bpStateMobile=false}inz.details.breakpointChange(false,true)};inz.details.breakpointChange=function(tablet,mobile){console.debug("breakpoingChange: ".concat(tablet,", ").concat(mobile," - bpTable: ").concat(inz.details.bpStateTablet," bpMobile: ").concat(inz.details.bpStateMobile));if(tablet){if(inz.details.bpStateTablet){inz.accordion.attachEvents($(".vd_submit"))}else{inz.accordion.openAll($(".vd_submit section article .inz_accordion"),true);$(".vd_submit section article .process_title").off("click")}}if(mobile){if(inz.details.bpStateMobile){var apply=$("#vd_navbar .vd_nb_nav_tab_container > .vd_nb_apply_btn");if(apply.length===1){apply.detach().appendTo("#vd_navbar .vd_nb_nav_tab_backing")}}else{var _apply=$("#vd_navbar .vd_nb_nav_tab_backing > .vd_nb_apply_btn");if(_apply.length===1){_apply.detach().appendTo("#vd_navbar .vd_nb_nav_tab_container")}}}};inz.details.dispatchEvent=function(srcElement,eventName,detail){var event=new CustomEvent(eventName,{bubbles:true,detail:detail});srcElement.dispatchEvent(event)};$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}});return o};inz.details.criteria={};inz.details.criteria.emptyTipsCheck=function(){$(".vd_criteria .inz_criteria_tips").each(function(){var last_tip=$(this).find(".inz_criteria_tip").not(".inactive").last();if(last_tip.length===0){$(this).addClass("hidden")}else{$(this).removeClass("hidden");last_tip.addClass("tip_last_vis")}})};inz.details.initSections=function(){var sections=document.querySelectorAll("#main > .vd_section_container");sections.forEach(function(section){var sid=section.getAttribute("data-sid");inz.details.sectionLoaded(sid)})};inz.details.sectionLoaded=function(sec_id){var sec=$("#sc_".concat(sec_id)).first();var sec_type=$(sec).attr("data-vds-type");switch(sec_type){case"folder":{var vd_sec=$(sec).find(".vd_section").first();vd_sec.find(".vd_section").each(function(){inz.details.sectionLoaded($(this).attr("id"))});break}case"how_to_submit":inz.details.breakpointChange(true,false);break;case"process_and_costs":if(inz.details.navbar&&inz.details.navbar.$filters){var nat=inz.details.navbar.$filters.find("#filter_nationality").val();var res=inz.details.navbar.$filters.find("#filter_residence").val();$("#"+sec_id+" .process_documents .pdoc").each(function(){var filters=$(this).find("[data-showonfilter]");if(filters.length!==0){filters.each(function(){var vals=$(this).data("showonfilter").split(",");var _iterator2=_createForOfIteratorHelper(vals),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var val=_step2.value;val=val.trim();if(val.startsWith("residence-")&&val.substr(val.length-3)===res||val.startsWith("nationality-")&&val.substr(val.length-3)===nat){$(this).toggleClass("inactive",false);break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}})}})}$("#"+sec_id+" .vd_currency_select").on("change",function(e){var currency=$(this).val();$(this).closest(".vd_currency_group").find(".currency").hide();$(this).closest(".vd_currency_group").find('[data-currency="'.concat(currency,'"]')).show()});$("#"+sec_id+" .vd_currency_select").trigger("change");break;case"points":$(".vd_navbar .vd_nb_points").toggleClass("hidden",false);window.insertTerms();break;case"conditions":break;case"who_can_apply":$(".vd_criteria_view_all").click(function(){var container=$(this).closest(".vd_criteria");if($(this).data("open")){inz.accordion.closeAll(container.find(".inz_accordion"));$(this).text("View All Evidence");$(this).data("open",false)}else{inz.accordion.openAll(container.find(".inz_accordion"));$(this).text("Hide All Evidence");$(this).data("open",true)}});inz.details.navbar.$navbar[0].addEventListener("inz:navbar_filters",function(e){console.debug("@@@ Navbar filter event: "+JSON.stringify(e.detail));$(".vd_criteria [data-flt-nat]").each(function(){if($(this).data("flt-nat").includes(e.detail.nat)){$(this).removeClass("inactive")}else{$(this).addClass("inactive")}});$(".vd_criteria [data-flt-res]").each(function(){if($(this).data("flt-res").includes(e.detail.res)){$(this).removeClass("inactive")}else{$(this).addClass("inactive")}});inz.details.criteria.emptyTipsCheck()});inz.details.criteria.emptyTipsCheck();break}};inz.details.createNavbar=function(navbarEl){inz.details.navbar=new inz.details.Navbar(navbarEl,true);inz.details.navbar.setup();return inz.details.navbar};inz.details.createFilterNavbar=function(navbarEl,filterEl,filters,firstId){inz.details.navbar=new inz.details.FilterNavbar(navbarEl,true,filterEl,filters,firstId);inz.details.navbar.setup();return inz.details.navbar};inz.details.createSeparateNavbar=function(navbarEl){inz.details.navbar=new inz.details.SeparateNavbar(navbarEl,false);inz.details.navbar.setup();return inz.details.navbar};inz.details.getNavbar=function(navbarEl){var navbar=$(navbarEl).data("navbar");return navbar};inz.details.Navbar=function(){"use strict";function _class2(navbarEl,overviewTab){_classCallCheck(this,_class2);_defineProperty(this,"clearSections",function(){for(var idx in inz.details.sectionOrder){var sectionId=inz.details.sectionOrder[idx];inz.details.sections[sectionId]=false}});var _this=this;this.$navbar=$(navbarEl);this.$navbar.data("navbar",this);this.navbar=this.$navbar[0];this.navbarState=0;this.navbarStuck=false;this.scrollTarget=null;this.hasFilters=false;this.sectionOrder=[];this.sections={};this.sectionElements={};this.navbarStickyIO=new IntersectionObserver(function(entries,observer){_this.handleNavbarIntersect(entries,observer)},{threshold:[0]});this.navbarStickyIO.observe(document.querySelector(".navbar_marker"));this.navbarSectionIO=new IntersectionObserver(function(entries,observer){_this.handleNavbarSectionIntersect(entries,observer)},{threshold:[0],rootMargin:"-220px 0px 0px 0px"});if(overviewTab)this.navbarSectionOvr=new IntersectionObserver(function(entries,observer){_this.handleNavbarSectionIntersect(entries,observer)},{threshold:[0],rootMargin:"-10px 0px 0px 0px"});var sections=document.querySelectorAll("#main > .vd_section_container");var _idx=0;this.sectionElements["overview"]=document.getElementById("overview");this.sectionElements["overview"].setAttribute("data-vds-type","overview");this.sectionElements["overview"].setAttribute("data-sid","overview");if(overviewTab)this.navbarSectionOvr.observe(this.sectionElements["overview"]);this.sections["overview"]=false;this.sectionOrder[_idx++]="overview";sections.forEach(function(section){var sid=section.getAttribute("data-sid");var vds=section.getAttribute("data-vds-type");_this.sectionOrder[_idx++]=sid;_this.sections[sid]=false;_this.sectionElements[sid]=section;_this.navbarSectionIO.observe(section)})}_createClass(_class2,[{key:"setup",value:function setup(){this.setupNavbar(false);this.setupHandlers()}},{key:"scrollNavbarForTab",value:function scrollNavbarForTab(tab_el){if(tab_el===void 0){return}var cr=tab_el.getBoundingClientRect();var container_cr=$(".vd_navbar .vd_nb_nav_tabs")[0].getBoundingClientRect();var centre_x=container_cr.width/2;var left=tab_el.offsetLeft-centre_x+cr.width/2;if(left<0)left=0;$(".vd_navbar .vd_nb_nav_tabs")[0].scroll({top:0,left:left,behavior:"smooth"})}},{key:"setupHandlers",value:function setupHandlers(){var _this=this;$(".vd_navbar .vd_nb_nav_tabs_tab").click(function(e){_this.scrollNavbarForTab(this);var target=$($(this).find("a").attr("href"));window.scrollTo({left:0,top:target.offset().top-$(".vd_navbar").outerHeight()+10,behavior:"smooth"});setTimeout(function(){window.scrollTo({left:0,top:target.offset().top-$(".vd_navbar").outerHeight()+10,behavior:"smooth"})},500);e.preventDefault();e.stopPropagation()})}},{key:"setupNavbar",value:function setupNavbar(hasFilters){var config={attributes:true,childList:false,subtree:false};var _this=this;_this.$navbar.on("affixed.bs.affix",function(){$(".navbar_filler").css("height","200px");$(".navbar_filler").removeClass("hidden");if(hasFilters){_this.$navbar.find(".vd_nb_title").show();_this.openCloseFilters(false)}_this.navbarStuck=true});_this.$navbar.on("affixed-top.bs.affix",function(){$(".navbar_filler").addClass("hidden");if(hasFilters){_this.$navbar.find(".vd_nb_title").hide()}_this.navbarStuck=false});$(_this.$navbar.find(".vd_nb_tab a").on("click",function(){var $acc=$(_this.$navbar.find(".vd_nb_tab a"));if(hasFilters){var isOpen=$acc.hasClass("active");if(isOpen){setTimeout(function(){var isOpen2=$acc.hasClass("active");if(isOpen2)$("#navbar_filters").css({"display":"","height":"auto"})},333)}}}))}},{key:"dispatchNavbarEvent",value:function dispatchNavbarEvent(eventName,detail){var event=new CustomEvent(eventName,{bubbles:true,detail:detail});this.navbar.dispatchEvent(event)}},{key:"stickNavbar",value:function stickNavbar(){$(".navbar_filler").css("height","200px");$(".navbar_filler").removeClass("hidden");$("#vd_navbar").toggleClass("affix",true);$("#vd_navbar").toggleClass("affix-top",false);this.navbarStuck=true}},{key:"unstickNavbar",value:function unstickNavbar(){$(".navbar_filler").addClass("hidden");$("#vd_navbar").toggleClass("affix",false);$("#vd_navbar").toggleClass("affix-top",true);this.navbarStuck=false}},{key:"handleNavbarIntersect",value:function handleNavbarIntersect(entries,observer){var entry=entries[0];if(entry.isVisible||entry.boundingClientRect.top>=0){this.unstickNavbar();if(this.navbarStuck){this.navbarStuck=false;this.dispatchNavbarEvent("inz:navbar_state",{isStuck:false})}}else if(entry.boundingClientRect.top<0){this.stickNavbar();if(!this.navbarStuck){this.navbarStuck=true;this.dispatchNavbarEvent("inz:navbar_state",{isStuck:true})}}}},{key:"handleNavbarSectionIntersect",value:function handleNavbarSectionIntersect(entries,observer){for(var idx in entries){var entry=entries[idx];var sectionType=entry.target.getAttribute("data-vds-type");var sectionId=entry.target.getAttribute("data-sid");console.debug(entry.time+" - T: "+sectionType+" In: "+entry.isIntersecting+" Vis: "+entry.isVisible+" Ratio: "+entry.intersectionRatio+" Top: "+entry.boundingClientRect.top);this.sections[sectionId]=entry.isIntersecting}for(var _idx2 in this.sectionOrder){var _sectionId=this.sectionOrder[_idx2];if(this.sections[_sectionId]){console.debug("ID: "+_sectionId);$(".vd_nb_nav_tabs_tab").removeClass("current");var tgt=$('.vd_nb_nav_tabs_tab[data-sid="'+_sectionId+'"]');tgt.addClass("current");this.scrollNavbarForTab(tgt[0]);break}}}}]);return _class2}();inz.details.FilterNavbar=function(_inz$details$Navbar){"use strict";_inherits(_class3,_inz$details$Navbar);var _super=_createSuper(_class3);function _class3(navbarEl,overviewTab,filterEl,filters,firstId){var _this2;_classCallCheck(this,_class3);_this2=_super.call(this,navbarEl,overviewTab);var _this=_assertThisInitialized(_this2);_this2.$filters=$(filterEl);_this2.$submit=$(filterEl).find('input[type="submit"]');_this2.filters=filters;_this2.hasFilters=true;var firstFilter=_this2.filters[firstId];_this2.addFilter(_this2.$filters,firstFilter,3);_this2.fitFilters();return _this2}_createClass(_class3,[{key:"setup",value:function setup(){this.setupHandlers();this.setupNavbar(true)}},{key:"setupHandlers",value:function setupHandlers(){var _this=this;_get(_getPrototypeOf(_class3.prototype),"setupHandlers",this).call(this);this.$filters.find(".vd_nb_filter_input select").on("select2:select",function(){_this.submitEnable()});this.$filters.on("submit",function(e){e.preventDefault();_this.filterUpdate();_this.openCloseFilters(false)});$("#navbar_filters").css({"display":"","height":"auto"});setTimeout(function(){$("#navbar_filters").css({"display":"","height":"auto"});_this.navbarChange()},333)}},{key:"openCloseFilters",value:function openCloseFilters(open){var $acc=$(this.$navbar.find(".vd_nb_tab a"));var isOpen=$acc.hasClass("active");if(open&&!isOpen){$acc.trigger("click");$acc.addClass("active");setTimeout(function(){$("#navbar_filters").css({"display":"","height":"auto"})},333)}else if(!open&&isOpen){$acc.trigger("click");$acc.removeClass("active")}}},{key:"fitFilters",value:function fitFilters(){var $filters=$(inz.details.$filters).find(".vd_nb_filter_input");var numFilters=$filters.length;if(numFilters<4){$filters.each(function(){$(this).removeClass("vd_nb_filter_wide")})}else{if(numFilters===4){$($filters[0]).addClass("vd_nb_filter_wide");$($filters[1]).addClass("vd_nb_filter_wide")}else{$filters.each(function(){$(this).removeClass("vd_nb_filter_wide")})}}}},{key:"focusFilters",value:function focusFilters(event){event.preventDefault();this.openCloseFilters(true)}},{key:"submitEnable",value:function submitEnable(){var missingValue=false;this.$filters.find(".vd_nb_filter_input select").each(function(){if($(this).val()==="")missingValue=true});if(missingValue){this.$submit.prop("disabled",true)}else{this.$submit.prop("disabled",false)}return!missingValue}},{key:"readFilters",value:function readFilters(){var values=sessionStorage.getItem("inz.details.filters")}},{key:"storeFilters",value:function storeFilters(){var values=inz.details.$filters.serialize();sessionStorage.setItem("inz.details.filters",values)}},{key:"filterUpdate",value:function filterUpdate(){$.ajaxSetup({cache:true});var _this=this;var values=this.$filters.serialize();var url=window.location.origin+window.location.pathname;$("div.vd_section[data-details-fu]").each(function(){var sec=$(this).attr("data-details-fu");var sec_id=$(this).attr("id");var sec_type=$("#sc_"+sec_id).data("vds-type");console.debug("Filter update: Sec: ".concat(sec," ").concat(this," (").concat(sec_type,")"));$(this).parents(".vd_background").first().load(url+"?sec="+sec+"&"+values,function(response,status,xhr){if(status==="error"){var msg="Sorry but there was an error: ";console.log(msg+xhr.status+" "+xhr.statusText)}else if(status==="success"){$(document).trigger("ajaxpages:contentloaded",{target:$("#"+sec_id)});inz.details.sectionLoaded(sec_id)}})});this.dispatchNavbarEvent("inz:navbar_filters",this.$filters.serializeObject())}},{key:"shouldAddFilter",value:function shouldAddFilter(filter){var count=0;var citizenship=this.$filters.find("#filter_nationality").val();var _iterator3=_createForOfIteratorHelper(filter.options),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var opt=_step3.value;if(opt.citizenship===void 0||opt.citizenship===null){count+=1}else{if(opt.citizenship.includes(citizenship)===true)count+=1}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return count>1}},{key:"addFilter",value:function addFilter(el,filter,insertLocation){var _this=this;var filterHtml='<div class="vd_nb_filter_input"><select id="'+filter.id+'" name="'+filter.name+'" class="" data-placeholder="'+filter.placeholder+'" data-theme="light" class="select_2-generic" style="width: 100%">        <option></option>        <option value=" " disabled="disabled">'+filter.placeholder+"</option>";for(var i=0;i<filter.options.length;i++){if(filter.options[i].next)filterHtml+='<option data-fltn="'.concat(filter.options[i].next,'" value="').concat(filter.options[i].value,'">').concat(filter.options[i].name,"</option>");else filterHtml+='<option value="'.concat(filter.options[i].value,'">').concat(filter.options[i].name,"</option>")}filterHtml+="</select></div>";if(el!==void 0){switch(insertLocation){case 0:$(filterHtml).insertAfter(el);break;case 1:$(filterHtml).insertBefore(el);break;case 2:$(filterHtml).appendTo(el);break;case 3:$(filterHtml).prependTo(el);break}}else $("form#filters").append(filterHtml);if(filter.options.length<10)$("#"+filter.id).select2({theme:"light","placeholder":filter.placeholder,"minimumResultsForSearch":"Infinity"});else $("#"+filter.id).select2({theme:"light","placeholder":filter.placeholder});$("#"+filter.id).on("select2:select",function(){var opt=$(this).children("option:selected");var next=opt.attr("data-fltn");if(next!==void 0){$(this).parent().nextAll(".vd_nb_filter_input").remove();var flt=_this.filters[next];if(_this.shouldAddFilter(flt)){_this.addFilter($(this).parent(),flt,0);_this.fitFilters()}else{_this.submitEnable()}}else _this.submitEnable()})}},{key:"navbarChange",value:function navbarChange(){console.debug("Navbar Change: "+this.$navbar.attr("class")+" State: "+this.navbarState);if(this.$navbar.hasClass("affix")){this.navbarStuck=true;var orgHgt=this.$navbar.height();this.$navbar.find(".vd_nb_title").show();this.openCloseFilters(false);var hgtChange=this.$navbar.height()-orgHgt-1}else{if(this.navbarState===1){this.navbarState=0;return}this.navbarStuck=false;this.$navbar.find(".vd_nb_title").hide()}}}]);return _class3}(inz.details.Navbar);inz.details.checkCurrentSection=function(){var topOfView=$(".vd_navbar").outerHeight();var sections=$(".vd_section");if(sections.length!=0){if(inz.details.hasFilters&&sections.length>1&&topOfView<=sections[1].getBoundingClientRect().top){$(".vd_nb_nav_tabs_tab").removeClass("current");$('.vd_nb_nav_tabs_tab a[href="#overview"]').parent().addClass("current");return}for(var n=0;n<sections.length;n++){if(sections[n].getBoundingClientRect().bottom>=topOfView){$(".vd_nb_nav_tabs_tab").removeClass("current");$('.vd_nb_nav_tabs_tab a[href="#sc_'+sections[n].id+'"]').parent().addClass("current");break}}}};inz.details.SeparateNavbar=function(_inz$details$Navbar2){"use strict";_inherits(_class4,_inz$details$Navbar2);var _super2=_createSuper(_class4);function _class4(navbarEl,overviewTab){var _this3;_classCallCheck(this,_class4);_this3=_super2.call(this,navbarEl,overviewTab);var _this=_assertThisInitialized(_this3);var sections=document.querySelectorAll("#main > .vd_section_container");_this3.current="overview";var idx=0;sections.forEach(function(section){var sid=section.getAttribute("data-sid");var vds=section.getAttribute("data-vds-type");if(vds!=="overview"){$(section).hide()}});var ov=document.getElementById("overview");ov.setAttribute("data-sid",_this3.sectionOrder[1]);return _this3}_createClass(_class4,[{key:"setup",value:function setup(){this.setupHandlers();this.setupNavbar(false)}},{key:"setupHandlers",value:function setupHandlers(){var _this=this;_get(_getPrototypeOf(_class4.prototype),"setupHandlers",this).call(this);$(".vd_navbar .vd_nb_nav_tabs_tab a").click(function(e){e.preventDefault()});$(".vd_navbar .vd_nb_nav_tabs_tab").unbind("click");$(".vd_navbar .vd_nb_nav_tabs_tab").click(function(e){var sid=$(this).closest(".vd_nb_nav_tabs_tab").attr("data-sid");if(sid!==_this.current)_this.changeTab(sid)});this.current=this.sectionOrder[1];this.sectionElements[this.current].style.display="block"}},{key:"changeTab",value:function changeTab(sid){this.sectionElements[sid].style.display="block";if(this.current!=="overview"){this.sectionElements[this.current].style.display="none"}this.current=sid;window.location.hash=this.current==="overview"?"#overview":"#sc_".concat(sid)}}]);return _class4}(inz.details.Navbar);


var inz=inz||{};inz.landing={};inz.landing.carousel={};inz.landing.carousel.init=function(){var c=inz.landing.carousel;c.container=$(".inz_landing_panel .inz_carousel_container").first()[0];c.left=$(".inz_landing_panel .inz_left_chevron");c.right=$(".inz_landing_panel .inz_right_chevron");c.slideWidth=$(".inz_landing_panel .inz_carousel_container .inz_carousel_slide").first().width();c.slides=$(".inz_landing_panel .inz_carousel_container .inz_carousel_slide");c.numberSlides=c.slides.length;c.curSlide=0;c.mediaQueryList=window.matchMedia("(max-width: 944px)");inz.landing.carousel.update_media();c.mediaQueryList.addEventListener("change",inz.landing.carousel.update_media);$(".inz_landing_panel .inz_left_chevron").hide();if(c.numberSlides==0)$(".inz_landing_panel .inz_right_chevron").hide();console.log("Carousel things: Slide width: "+c.slideWidth);$(".inz_landing_panel .inz_right_chevron").click(function(){console.debug("Right: "+c.container.scrollLeft+" Cur slide: "+c.curSlide);c.set_slide(c.curSlide+1)});$(".inz_landing_panel .inz_left_chevron").click(function(){console.debug("Left: "+c.container.scrollLeft+" Cur slide: "+c.curSlide);c.set_slide(c.curSlide-1)});$(".inz_landing_panel .inz_carousel_select").click(function(){var $this=$(this);console.debug("Id: "+$this.attr("id")+" Idx:"+$this.data("slide-idx"));var idx=$this.data("slide-idx");c.set_slide(idx)});c.set_slide(0)};inz.landing.carousel.set_display=function(el,visible){if(visible){if(!el.is(":visible"))el.fadeIn()}else{if(el.is(":visible"))el.fadeOut()}};inz.landing.carousel.set_slide=function(slide_idx){var c=inz.landing.carousel;if(slide_idx>c.numberSlides||slide_idx<0)return;c.slideWidth=$(".inz_landing_panel .inz_carousel_container .inz_carousel_slide").first().width();c.container.scrollTo({left:c.slideWidth*slide_idx,top:0,behavior:"smooth"});$(c.slides[c.curSlide]).fadeTo(500,.3);$("#slide_select_"+c.curSlide).fadeTo(500,.4);c.curSlide=slide_idx;$(c.slides[c.curSlide]).fadeTo(500,1);if(c.curSlide==0){c.set_display(c.right,true);c.set_display(c.left,false)}else if(c.curSlide==c.numberSlides-1){c.set_display(c.right,false);c.set_display(c.left,true)}else{c.set_display(c.right,true);c.set_display(c.left,true)}$("#slide_select_"+c.curSlide).fadeTo(500,1)};inz.landing.carousel.update_media=function(mql){console.log("Carousel Media!!!");var m=window.matchMedia("(max-width: 944px)");if(m.matches){$(".inz_carousel_image_small").show();$(".inz_carousel_image").hide();$(".inz_carousel_chevron").addClass("inz_small")}else{$(".inz_carousel_image").show();$(".inz_carousel_image_small").hide();$(".inz_carousel_chevron").removeClass("inz_small")}};


var inz=inz||{};inz.advancedImages=inz.advancedImages||{};inz.advancedImages.defaultSelector=".advanced_image_background";inz.advancedImages.resizeObserver=null;inz.advancedImages.init=function(){if(typeof window.ResizeObserver==="function"){inz.advancedImages.resizeObserver=new ResizeObserver(inz.advancedImages.resizeObserved)}inz.advancedImages.updateFocusPoint(inz.advancedImages.defaultSelector)};inz.advancedImages.resizeObserved=function(entries,observer){for(var n=0;n<entries.length;n++){inz.advancedImages.updateFocusPoint(entries[n].target,true)}};inz.advancedImages.setFocusPoint=function(target,focus_x,focus_y,img_width,img_height){var $el=$(target);var width=$el[0].clientWidth;var hgt=$el[0].clientHeight;var ratio=Math.max(width/img_width,hgt/img_height);width=Math.round(ratio*img_width);hgt=Math.round(ratio*img_height);var width_ratio=width/$el[0].clientWidth+1e-6;var height_ratio=hgt/$el[0].clientHeight+1e-6;var x=((focus_x/100-.5)*width_ratio/(width_ratio-1)+.5)*100;x=x>100?100:x<0?0:x;var y=((focus_y/100-.5)*height_ratio/(height_ratio-1)+.5)*100;y=y>100?100:y<0?0:y;$el.css({"background-position":""+x+"% "+y+"%"})};inz.advancedImages.calcFocusValues=function(img_el,client_x,client_y){var br=img_el.getBoundingClientRect();var x=Math.round(client_x-br.left);var y=Math.round(client_y-br.top);var focus_x=Math.round(x/img_el.clientWidth*100*100)/100;var focus_y=Math.round(y/img_el.clientHeight*100*100)/100;return[focus_x,focus_y,x,y]};inz.advancedImages.updateFocusPoint=function(target,skipResizeObserverRegistration){skipResizeObserverRegistration=skipResizeObserverRegistration===true;var elements=$(target);var focussed=0;for(var n=0;n<elements.length;n++){var e=$(elements[n]);if(e.hasClass(inz.advancedImages.defaultSelector.substring(1))){inz.advancedImages.setFocusPoint(e,e.data("focusX"),e.data("focusY"),e.data("imgXx"),e.data("imgYy"));if(!skipResizeObserverRegistration&&inz.advancedImages.resizeObserver!==null){inz.advancedImages.resizeObserver.observe(e[0])}focussed++}}};


inz.mediaCentre={};inz.mediaCentre.MediaCentreList=function(){this.elements={search_widget:$("#media_centre_search_widget"),search_topic:$("#media_centre_search_topic"),search_query:$("#media_centre_search_query"),search_button:$("#media_centre_search_button"),media_centre_page_list:$("#media_centre_page_list"),show_more:$("#media_centre_page_listing_show_more"),no_results:$("#media_centre_page_listing_search_no_results"),search_summary:$("#media_centre_search_results_summary")};this.state={next:0};this.readFromHash();var self=this;this.elements.search_button.click(function(){self.writeToHash();self.performSearch()});this.elements.search_query.on("keypress",function(e){if(e.keyCode===13){e.preventDefault();e.stopPropagation();self.elements.search_button.click()}});this.elements.show_more.find("button").click(function(){self.showMore()})};inz.mediaCentre.MediaCentreList.prototype.writeToHash=function(){var topic=this.elements.search_topic.val();var query=this.elements.search_query.val();var hash=topic||query?(topic?encodeURI(topic):"")+(query?"|"+encodeURI(query):""):"";if(window.location.hash!==hash){window.location.hash=hash}};inz.mediaCentre.MediaCentreList.prototype.readFromHash=function(){var hashParts=window.location.hash.substring(1).split("|");this.elements.search_topic.val(decodeURI(hashParts[0]));this.elements.search_query.val(hashParts.length>1?decodeURI(hashParts[1]):"")};inz.mediaCentre.MediaCentreList.prototype.performSearch=function(){this.elements.media_centre_page_list.empty();this.elements.show_more.hide();this.elements.no_results.hide();this.elements.search_summary.hide().empty();this.state.next=null;this.sendSearchRequest()};inz.mediaCentre.MediaCentreList.prototype.showMore=function(){this.elements.show_more.hide();this.sendSearchRequest()};inz.mediaCentre.MediaCentreList.prototype.sendSearchRequest=function(){var self=this;$.ajax({url:this.elements.search_widget.data("searchUrl"),cache:true,data:{topic:this.elements.search_topic.val(),query:this.elements.search_query.val(),next:this.state.next},success:function(data){self.processData(data)}})};inz.mediaCentre.MediaCentreList.prototype.renderListing=function(page){var self=this;var imageElement=null;var listing=$("<div>",{"class":"media_centre_page_listing"});if(page["image_url"]){var imageObject={"class":"media_centre_page_listing_lead_image advanced_image_background","style":page["image_attributes"]["style"]};for(var x in page["image_attributes"]){if(x.substr(0,4)==="data"){imageObject[x]=page["image_attributes"][x]}}if(page["url"]){imageObject["click"]=function(){window.location=page["url"]}}var imageDiv=$("<div>",imageObject);listing.append(imageDiv);imageElement=imageDiv[0]}var listingText=$("<div>",{"class":"media_centre_page_listing_text"});var listingTitles=$("<div>",{"class":"media_centre_page_listing_titles"});listingTitles.append($("<h3>").append($("<a>",{href:page["url"],text:page["title"]})));if(page["subtitle"]){listingTitles.append($("<p>",{text:page["subtitle"]}))}listingText.append(listingTitles);var listingMetadata=$("<div>",{"class":"media_centre_page_listing_metadata"});var dart=$("<div>",{"class":"media_centre_page_media_date_and_reading_time"});dart.append($("<div>",{"class":"media_centre_page_media_date",text:page["media_date"]}));dart.append($("<div>",{"class":"media_centre_page_reading_time",text:page["reading_time"]}));listingMetadata.append(dart);var tat=$("<div>",{"class":"media_centre_page_listing_tags_and_type"});if(page["tags"]&&page["tags"].length){var tags=$("<span>",{"class":"media_centre_page_listing_tags"});for(var n=0;n<page["tags"].length;n++){if(n>0){tags.append(document.createTextNode(" "))}var tag=$("<a>",{href:page["tags"][n]["url"],text:page["tags"][n]["title"]});var tagURL=page["tags"][n]["url"];var tagUID=/.*?[#]([0-9A-Fa-f]{32})/.exec(tagURL);if(tagUID){tag.data("tag",tagUID);tag.click(function(e){e.preventDefault();e.stopPropagation();self.handleTagLinkClick($(this).data("tag"))})}tags.append(tag)}tat.append(tags)}listingMetadata.append(tat);listingText.append(listingMetadata);listing.append(listingText);this.elements.media_centre_page_list.append(listing);if(imageElement!==null){inz.advancedImages.updateFocusPoint(imageElement);if(typeof inz.advancedImages.edit==="object"&&typeof inz.advancedImages.edit.register==="function"){inz.advancedImages.edit.register(imageElement)}}};inz.mediaCentre.MediaCentreList.prototype.renderSearchResult=function(page){var imageElement=null;var listing=$("<div>",{"class":"media_centre_page_listing search_result"});var topRow=$("<div>");topRow.append($("<h3>").append($("<a>",{href:page["url"],text:page["title"]})));topRow.append($("<p>",{text:page["subtitle"]?page["subtitle"]:""}));listing.append(topRow);var bottomRow=$("<div>");var dart=$("<div>",{"class":"media_centre_page_media_date_and_reading_time"});dart.append($("<div>",{"class":"media_centre_page_media_date",text:page["media_date"]}));dart.append($("<div>",{"class":"media_centre_page_reading_time",text:page["reading_time"]}));bottomRow.append(dart);listing.append(bottomRow);this.elements.media_centre_page_list.append(listing);if(imageElement!==null){inz.advancedImages.updateFocusPoint(imageElement);if(typeof inz.advancedImages.edit==="object"&&typeof inz.advancedImages.edit.register==="function"){inz.advancedImages.edit.register(imageElement)}}};inz.mediaCentre.MediaCentreList.prototype.handleTagLinkClick=function(tag){var needsScroll=!this.isSearchWidgetInView();this.elements.search_topic.val(tag);this.elements.search_topic.trigger("change.select2");this.elements.search_query.val("");this.elements.search_button.click();if(needsScroll){this.elements.search_widget[0].scrollIntoView({block:"center"})}};inz.mediaCentre.MediaCentreList.prototype.isSearchWidgetInView=function(){var widgetTop=this.elements.search_widget.offset().top;var widgetBottom=widgetTop+this.elements.search_widget.outerHeight();var viewportTop=$(window).scrollTop();var viewportBottom=viewportTop+$(window).height();return widgetBottom>viewportTop&&widgetTop<viewportBottom};inz.mediaCentre.MediaCentreList.prototype.updateSearchSummary=function(data){if(data["explicit_search"]){var summaryText="Results 1-"+(data["next"]?data["next"]:data["result_count"])+" of "+data["result_count"];if(data["search_tag"]||data["search_query"]){summaryText+=" for "}if(data["search_tag"]){summaryText+=data["search_tag"]}if(data["search_tag"]&&data["search_query"]){summaryText+=" / "}if(data["search_query"]){summaryText+=data["search_query"]}this.elements.search_summary.text(summaryText).show()}else{this.elements.search_summary.hide().empty()}};inz.mediaCentre.MediaCentreList.prototype.processData=function(data){this.elements.media_centre_page_list.toggleClass("search_results",data["explicit_search"]);if(data["pages"].length<1){this.elements.no_results.show()}for(var n=0;n<data["pages"].length;n++){if(data["explicit_search"]){this.renderSearchResult(data["pages"][n])}else{this.renderListing(data["pages"][n])}}this.state.next=data["next"];this.elements.show_more.toggle(data["next"]!==null);this.updateSearchSummary(data)};


$(document).on("ajaxpages:contentloaded",function(e,data){var dockTools=$("#docked_sliding_panel .dock_tools");dockTools.find(".document_action").remove();var sliderDocumentActions=$(".slider_document_actions");if(sliderDocumentActions.length){sliderDocumentActions.css("display","none");sliderDocumentActions.find(".document_action").clone().appendTo(dockTools.find(".tools_secondary"))}});
